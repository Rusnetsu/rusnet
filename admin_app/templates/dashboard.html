<!DOCTYPE html><html><head><meta charset="utf-8"><title>–î–∞—à–±–æ—Ä–¥ ‚Äî –ê–¥–º–∏–Ω–∫–∞</title><link rel="stylesheet" href="/admin_app/static/css/style.css"><style>.dashboard-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:30px 0}.stat-card{background:white;padding:25px;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);text-align:center;border-left:4px solid #3498db}.stat-number{font-size:2.5em;font-weight:bold;color:#2c3e50;margin-bottom:5px}.stat-label{color:#7f8c8d;font-size:14px}.quick-actions{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin:30px 0}.action-card{background:white;padding:20px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);text-align:center;transition:transform 0.2s}.action-card:hover{transform:translateY(-5px);box-shadow:0 4px 8px rgba(0,0,0,0.15)}.action-icon{font-size:2em;margin-bottom:10px}.recent-activity{background:white;padding:20px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);margin-top:30px}.activity-item{padding:10px 0;border-bottom:1px solid #ecf0f1;display:flex;justify-content:space-between;align-items:center}.activity-item:last-child{border-bottom:none}.bot-status{display:inline-block;padding:4px 8px;border-radius:12px;font-size:12px;font-weight:bold}.status-online{background:#d4edda;color:#155724}.status-offline{background:#f8d7da;color:#721c24}</style></head><body><div class="container"><div style="display:flex;gap:24px">{% include "menu.html" %}<div style="flex:1"><h1>üìä –î–∞—à–±–æ—Ä–¥</h1><p>–û–±–∑–æ—Ä –≤–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º</p>{% if notifications %}<div style="margin-bottom:30px"><h2>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>{% for notification in notifications %}<div class="message {{ notification.type }}" style="margin-bottom:10px">{{ notification.message }}{% if notification.action_url %}<a href="{{ notification.action_url }}" style="margin-left:10px;color:inherit;text-decoration:underline">–ü–µ—Ä–µ–π—Ç–∏</a>{% endif %}</div>{% endfor %}</div>{% endif %}<div class="dashboard-stats"><div class="stat-card"><div class="stat-number">{{ stats.total_bots }}</div><div class="stat-label">–í—Å–µ–≥–æ –±–æ—Ç–æ–≤</div></div><div class="stat-card"><div class="stat-number">{{ stats.active_bots }}</div><div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤</div></div><div class="stat-card"><div class="stat-number">{{ stats.total_interactions }}</div><div class="stat-label">–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π</div></div><div class="stat-card"><div class="stat-number">{{ subscription_info.days_remaining }} –¥–Ω.</div><div class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å –ø–æ–¥–ø–∏—Å–∫–∏</div></div></div><h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2><div class="quick-actions"><a href="/admin/bots/create" class="action-card"><div class="action-icon">ü§ñ</div><h3>–°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞</h3><p>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ Telegram –±–æ—Ç–∞</p></a><a href="/admin/" class="action-card"><div class="action-icon">üìÅ</div><h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ–Ω—é</h3><p>–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ–Ω—é –±–æ—Ç–∞</p></a><a href="/admin/preview" target="_blank" class="action-card"><div class="action-icon">üëÅÔ∏è</div><h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3><p>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –±–æ—Ç</p></a><a href="/admin/subscription" class="action-card"><div class="action-icon">üíé</div><h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π</h3><p>–ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω</p></a></div><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin:30px 0"><div class="quick-action-card" onclick="restartAllBots()" style="background:white;padding:20px;border-radius:8px;text-align:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,0.1);transition:transform 0.2s"><div style="font-size:2em">üîÑ</div><h3>–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –±–æ—Ç—ã</h3><p>–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±–æ—Ç—ã</p></div><div class="quick-action-card" onclick="checkAllStatuses()" style="background:white;padding:20px;border-radius:8px;text-align:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,0.1);transition:transform 0.2s"><div style="font-size:2em">üìä</div><h3>–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã</h3><p>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –±–æ—Ç–æ–≤</p></div><a href="/admin/logs" class="quick-action-card" style="background:white;padding:20px;border-radius:8px;text-align:center;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,0.1);transition:transform 0.2s;text-decoration:none;color:inherit"><div style="font-size:2em">üìã</div><h3>–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤</h3><p>–û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö –±–æ—Ç–æ–≤</p></a></div><h2>ü§ñ –°—Ç–∞—Ç—É—Å –≤–∞—à–∏—Ö –±–æ—Ç–æ–≤</h2><div class="recent-activity">{% for bot in bots %}<div class="activity-item"><div><strong>{{ bot.name }}</strong>(ID:{{ bot.id }})<span class="bot-status status-{{ bot.status }}">{% if bot.status == 'online' %}‚óè –æ–Ω–ª–∞–π–Ω{% elif bot.status == 'offline' %}‚óè –æ—Ñ—Ñ–ª–∞–π–Ω{% else %}‚óè{{ bot.status }}{% endif %}</span></div><div><a href="/admin/bot/{{ bot.id }}/settings" class="button secondary" style="padding:4px 8px;font-size:12px">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>{% if bot.status == 'online' %}<form method="post" action="/admin/bot/{{ bot.id }}/stop" style="display:inline"><button type="submit" class="button delete" style="padding:4px 8px;font-size:12px">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button></form>{% else %}<form method="post" action="/admin/bot/{{ bot.id }}/start" style="display:inline"><button type="submit" class="button" style="padding:4px 8px;font-size:12px">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button></form>{% endif %}</div></div>{% endfor %}</div>{% if subscription_info %}<div style="margin-top:30px;padding:20px;background:{% if subscription_info.is_active %}#d4edda{% else %}#f8d7da{% endif %};border-radius:8px;border-left:4px solid {% if subscription_info.is_active %}#28a745{% else %}#dc3545{% endif %}"><h3>üíé –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ</h3><p><strong>–¢–µ–∫—É—â–∏–π —Ç–∞—Ä–∏—Ñ:</strong>{% if subscription_info.plan_type == 'trial' %}üî∞ –ü—Ä–æ–±–Ω—ã–π{% elif subscription_info.plan_type == 'month' %}üìÖ –ú–µ—Å—è—á–Ω—ã–π{% elif subscription_info.plan_type == '3months' %}üóìÔ∏è 3 –º–µ—Å—è—Ü–∞{% elif subscription_info.plan_type == '6months' %}‚è±Ô∏è 6 –º–µ—Å—è—Ü–µ–≤{% elif subscription_info.plan_type == 'year' %}üéâ –ì–æ–¥–æ–≤–æ–π{% else %}{{ subscription_info.plan_type }}{% endif %}</p><p><strong>–°—Ç–∞—Ç—É—Å:</strong>{% if subscription_info.is_active %}‚úÖ –ê–∫—Ç–∏–≤–Ω–∞(–æ—Å—Ç–∞–ª–æ—Å—å{{ subscription_info.days_remaining }}–¥–Ω–µ–π){% else %}‚ùå –ù–µ–∞–∫—Ç–∏–≤–Ω–∞{% endif %}</p>{% if not subscription_info.is_active %}<div style="margin-top:10px"><a href="/admin/subscription" class="button">–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</a></div>{% endif %}</div>{% endif %}</div></div></div><script>function updateBotStatuses(){fetch('/admin/api/bots/status').then(response=>response.json()).then(data=>{data.bots.forEach(bot=>{const statusElement=document.querySelector(`.bot-status[data-bot-id="${bot.id}"]`);if(statusElement){statusElement.className=`bot-status status-${bot.status}`;statusElement.innerHTML=`‚óè ${getStatusText(bot.status)}`;const startBtn=document.querySelector(`[data-bot-id="${bot.id}"].start-btn`);const stopBtn=document.querySelector(`[data-bot-id="${bot.id}"].stop-btn`);if(startBtn&&stopBtn){startBtn.disabled=bot.status==='online';stopBtn.disabled=bot.status==='offline';}}});}).catch(error=>console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤:',error));}function getStatusText(status){const statusMap={'online':'–æ–Ω–ª–∞–π–Ω','offline':'–æ—Ñ—Ñ–ª–∞–π–Ω','failed':'–æ—à–∏–±–∫–∞','unknown':'–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'};return statusMap[status]||status;}document.addEventListener('DOMContentLoaded',updateBotStatuses);function restartAllBots(){% if not is_admin %}alert('‚õî –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º');return;{% endif %}if(confirm('–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –±–æ—Ç—ã?')){fetch('/admin/api/bots/restart_all',{method:'POST'}).then(response=>response.json()).then(data=>{alert(data.message);setTimeout(updateBotStatuses,2000);}).catch(error=>{alert('–û—à–∏–±–∫–∞: '+error);});}}function checkAllStatuses(){updateBotStatuses();alert('–°—Ç–∞—Ç—É—Å—ã –±–æ—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è...');}</script></body></html>